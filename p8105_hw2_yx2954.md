p8105_hw2_yx2954
================
Yiran Xu
2024-09-27

# Question 1

``` r
subway_df = read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = c("NA", "", ".")) |>
  select(Line, Station_Name = `Station Name`, Station_Latitude = `Station Latitude`, Station_Longitude = `Station Longitude`, Route1:Route11, Entry, Vending, Entrance_Type = `Entrance Type`, ADA) |>
  mutate(Entry = ifelse(Entry == "YES", TRUE, FALSE))|>
  janitor::clean_names()
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
head(subway_df)
```

    ## # A tibble: 6 × 19
    ##   line     station_name station_latitude station_longitude route1 route2 route3
    ##   <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr>  <chr> 
    ## 1 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ## 2 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ## 3 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 4 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 5 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 6 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ## # ℹ 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>,
    ## #   route8 <dbl>, route9 <dbl>, route10 <dbl>, route11 <dbl>, entry <lgl>,
    ## #   vending <chr>, entrance_type <chr>, ada <lgl>

## Description

The original dataset contains different types of **variables**,
**including character**, **logical variable** and double-precision
floating point (**numeric variable**); As for the information, it
contains **detailed information about subway stations, including station
name, exact locations, the routes they serve, entrance/exit information,
ADA compliance, vending availability, staffing information, entrance
location, corner location and whether the station allows free
crossovers**. The original dataset has gone through a series of data
cleaning process, including **imputing missing data, data pruning,
converting the character variable of ADA to logical variable, and
normalizing the header into a more cleaning way**. The cleaned data has
a dimension of **1,868 × 32**. The data is **tidy**, as now each value
in the entry is finely positioned without mixing.

## Answer the following questions using these data:

``` r
num_station = 
  subway_df |>
  distinct(line, station_name) |>
  nrow()

num_ada =
  subway_df |>
  filter(ada == TRUE) |>
  distinct(line, station_name) |>
  nrow()

prop_vending = subway_df |>
  filter(vending == "NO") |>
  summarise(proportion = mean(entry == TRUE)) |>
  pull(proportion)
```

There are **465** stations, **84** of them are ADA compliant,
**0.3770492** of station entrances / exits without vending allow
entrance

## Reformat data

``` r
subway_tidy_df = 
  subway_df |>
  mutate(across(route8:route11, as.character)) |>
  pivot_longer(
    cols = starts_with("route"),
    names_to = "route_number",  
    values_to = "route_name",   
    values_drop_na = TRUE      
  )
```

Calculate number of A train station with ADA

``` r
num_a_ada = 
  subway_tidy_df |>
  filter(route_name == "A") |>
  filter(ada == TRUE) |>
  nrow()
```

Of the stations that serve the A train, **107** are ADA compliant

# Question 2

``` r
mr_df = read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", skip = 1, na = c("NA", "", ",")) |>
  filter(!is.na(Dumpster)) |>
  janitor::clean_names() |>
  mutate(sports_balls = as.integer(round(sports_balls, 0))) |>
  select(-x15, -x16)
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
head(mr_df)
```

    ## # A tibble: 6 × 14
    ##   dumpster month year  date                weight_tons volume_cubic_yards
    ##      <dbl> <chr> <chr> <dttm>                    <dbl>              <dbl>
    ## 1        1 May   2014  2014-05-16 00:00:00        4.31                 18
    ## 2        2 May   2014  2014-05-16 00:00:00        2.74                 13
    ## 3        3 May   2014  2014-05-16 00:00:00        3.45                 15
    ## 4        4 May   2014  2014-05-17 00:00:00        3.1                  15
    ## 5        5 May   2014  2014-05-17 00:00:00        4.06                 18
    ## 6        6 May   2014  2014-05-20 00:00:00        2.71                 13
    ## # ℹ 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <int>, homes_powered <dbl>

Import other data frames

``` r
mr_df = mr_df |>
  mutate(trash_wheel = "Mr. Trash Wheel")

prof_df = read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1, na = c("NA", "", ",")) |>
  filter(!is.na(Dumpster)) |>
  janitor::clean_names() |>
  mutate(year = as.character(year), trash_wheel = "Professor Trash Wheel")

Gwyn_df = read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel", skip = 1, na = c("NA", "", ",")) |>
  filter(!is.na(Dumpster)) |>
  janitor::clean_names() |>
  mutate(year = as.character(year), trash_wheel = "Gwynnda Trash Wheel")
```

Combine all data frame

``` r
combined_df = bind_rows(mr_df, prof_df, Gwyn_df)
```
